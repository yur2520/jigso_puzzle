(()=>{var e={11:(e,t,n)=>{"use strict";e.exports=n.p+"44b0dcd2a0f86ab0c12b.jpeg"},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},60:(e,t,n)=>{"use strict";e.exports=n.p+"ba19a80c010c0c6d979f.jpeg"},70:(e,t,n)=>{"use strict";e.exports=n.p+"0b2f05f447cf0df7ff17.jpeg"},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},i=[],s=0;s<e.length;s++){var c=e[s],p=r.base?c[0]+r.base:c[0],u=a[p]||0,l="".concat(p," ").concat(u);a[p]=u+1;var d=n(l),g={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)t[d].references++,t[d].updater(g);else{var f=o(g,r);r.byIndex=s,t.splice(s,0,{identifier:l,updater:f,references:1})}i.push(l)}return i}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=n(a[i]);t[s].references--}for(var c=r(e,o),p=0;p<a.length;p++){var u=n(a[p]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=c}}},76:(e,t,n)=>{"use strict";e.exports=n.p+"b5328a20595be26969ca.jpeg"},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},257:(e,t,n)=>{"use strict";e.exports=n.p+"29fa3de44fde51db06b3.jpeg"},289:(e,t,n)=>{"use strict";e.exports=n.p+"8749d7e43be0086340f3.jpeg"},303:(e,t,n)=>{"use strict";e.exports=n.p+"73a0d5117ad05da2d63f.jpeg"},309:(e,t,n)=>{"use strict";e.exports=n.p+"6768ac511ce9232dc8be.png"},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var p=0;p<e.length;p++){var u=[].concat(e[p]);r&&i[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},348:(e,t,n)=>{"use strict";e.exports=n.p+"f9f3440436380dcc6532.jpeg"},353:(e,t,n)=>{"use strict";e.exports=n.p+"5558569c356c6c40ef4d.jpeg"},365:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(601),o=n.n(r),a=n(314),i=n.n(a),s=n(417),c=n.n(s),p=new URL(n(443),n.b),u=i()(o()),l=c()(p);u.push([e.id,`:root {\n     --theme-bg-color: linear-gradient(135deg, #adbdda 0%, #9e92ac 100%);\n     --theme-button-color: #9899ca;\n     --theme-button-hover-color: #7081b8;\n }\n\n @font-face {\n     font-family: 'SUITE Variable';\n     font-weight: 300 900;\n     /* 폰트 파일 경로가 올바른지 확인해주세요. */\n     src: url(${l}) format('woff2-variations');\n }\n\n\n * {\n     box-sizing: border-box;\n }\n\n body {\n     font-family: 'SUITE Variable', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n     text-align: center;\n     background: var(--theme-bg-color);\n     transition: 0.5s ease;\n     margin: 0;\n     padding: 20px;\n     min-height: 100vh;\n     color: #333;\n }\n\n .container {\n     max-width: 1200px;\n     margin: 0 auto;\n }\n\n h1 {\n     color: white;\n     text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n     margin-bottom: 30px;\n }\n\n .controls {\n     background: white;\n     border-radius: 15px;\n     padding: 20px;\n     margin-bottom: 20px;\n     box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n }\n\n .image-selection {\n     margin-bottom: 20px;\n }\n\n /* --- 캐러셀 스타일 시작 --- */\n .carousel-wrapper {\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;    \n    max-width: 800px;\n    margin: 0 auto 20px;\n }\n \n .carousel-container {\n    overflow: hidden;\n    width: 100%;\n }\n\n .preset-images {\n    display: flex; /* grid 대신 flex 사용 */\n    gap: 15px;\n    padding: 10px;\n    transition: transform 0.5s ease-in-out; /* 슬라이드 애니메이션 */\n }\n\n .preset-image-container {\n     text-align: center;\n     cursor: pointer;\n     transition: transform 0.3s;\n     flex-shrink: 0; /* 아이템 크기가 줄어들지 않도록 설정 */\n }\n /* --- 캐러셀 스타일 끝 --- */\n\n\n .preset-image-container:hover {\n     transform: translateY(-5px);\n }\n\n .preset-image {\n     width: 150px; /* 이미지 너비 조정 */\n     height: 110px; /* 이미지 높이 조정 */\n     border: 3px solid #ddd;\n     border-radius: 10px;\n     cursor: pointer;\n     object-fit: cover;\n     transition: all 0.3s;\n     display: block;\n }\n\n .preset-image:hover {\n     border-color: var(--theme-button-color);\n     box-shadow: 0 5px 15px var(--theme-button-color);;\n }\n\n .preset-image.selected {\n     border-color: var(--theme-button-color);\n     border-width: 4px;\n     box-shadow: 0 8px 20px var(--theme-button-color);;\n }\n \n /* 캐러셀 버튼 스타일 */\n .carousel-button {\n    background-color: rgba(255, 255, 255, 0.7);\n    border: 1px solid #ccc;\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;    \n    font-size: 20px;\n    font-family: 'SUITE Variable';\n    font-weight: bold;\n    cursor: pointer;\n    transition: all 0.2s;\n    margin: 0 10px;\n    z-index: 10;\n }\n \n .carousel-button:hover {\n    background-color: white;\n    box-shadow: 0 2px 5px rgba(0,0,0,0.2);\n }\n\n .difficulty-controls {\n     display: flex;\n     justify-content: center;\n     gap: 10px;\n     flex-wrap: wrap;\n }\n\n .difficulty-controls button {\n     background: var(--theme-button-color);\n     color: white;\n     border: none;\n     padding: 10px 20px;\n     border-radius: 8px;\n     cursor: pointer;\n     font-family: 'SUITE Variable';\n     font-size: 16px;\n     text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); \n     transition: all 0.3s;\n     box-shadow: inset 1px 1px 2px rgba(255, 255, 255, 0.2), inset -1px -1px 2px rgba(20, 20, 20, 0.2);\n }\n\n .difficulty-controls button:hover {\n     background: var(--theme-button-hover-color);\n     transform: translateY(-2px);\n }\n\n .difficulty-controls button:disabled {\n     background: #ccc;\n     cursor: not-allowed;\n     transform: none;\n }\n\n .game-info {\n     background: white;\n     border-radius: 10px;\n     padding: 15px;\n     margin-bottom: 20px;\n     box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n     display: none;\n }\n\n .game-info.show {\n     display: block;\n }\n\n .info-item {\n     display: inline-block;\n     margin: 0 15px;\n     font-weight: bold;\n }\n\n .error-message {\n     \n     color: rgb(43, 43, 43);\n     padding: 10px;\n     border-radius: 6px;\n     margin: 10px 0;\n     display: none;\n }\n\n .message-space { height: 50px;}\n\n .loading {    \n     color: rgb(77, 77, 77);\n     padding: 10px;\n     border-radius: 5px;\n     margin: 10px 0;\n     display: none;\n }\n\n #puzzle-container {\n     border: 0px solid #333;\n     position: relative;\n     background-color: #fff;\n     margin: 20px auto;\n     border-radius: 10px;\n     box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);\n     overflow: hidden;\n     z-index: 1;\n }\n\n #pieces-container {\n     border: 0px solid #999;\n     position: relative;\n     margin: 20px auto;\n     min-height: 200px;\n     background: rgba(255, 255, 255, 0.6);\n     border-radius: 10px;\n     backdrop-filter: blur(5px);\n     z-index: 2;\n }\n\n .puzzle-piece {\n     position: absolute;\n     border: 0px solid rgba(255, 255, 255, 0.8);\n     cursor: grab;\n     border-radius: 5px;\n     transition: transform 0.3s ease;\n     box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3), \n              inset 1px 1px 2px rgba(255, 255, 255, 0.6), \n             inset -1px -1px 2px rgba(20, 20, 20, 0.6); \n     z-index: 3;\n     will-change: transform; \n }\n\n .puzzle-piece:hover {\n     transform: scale(1.05);\n     z-index: 10;\n }\n\n .puzzle-piece:active {\n     cursor: grabbing;\n     z-index: 9;\n }\n\n .puzzle-piece.snapped {\n     cursor: default;\n     border: 0px solid rgba(0, 0, 0, 0.1);\n     border-radius: 0;\n     box-shadow: none;\n     z-index: 4;\n }\n\n .completion-message {\n     position: fixed;\n     top: 50%;\n     left: 50%;\n     transform: translate(-50%, -50%);\n     background: white;\n     padding: 30px;\n     border-radius: 15px;\n     box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n     z-index: 10000;\n     text-align: center;\n     display: none;\n }\n\n .completion-message.show {\n     display: block;\n     animation: popIn 0.5s ease;\n }\n\n @keyframes popIn {\n     0% {\n         transform: translate(-50%, -50%) scale(0.5);\n         opacity: 0;\n     }\n\n     100% {\n         transform: translate(-50%, -50%) scale(1);\n         opacity: 1;\n     }\n }\n\n /* 반응형 디자인 */\n @media (max-width: 768px) {\n     body {\n         padding: 10px;\n     }\n\n     h1 {\n         font-size: 24px;\n         margin-bottom: 20px;\n     }\n\n     .controls {\n         padding: 15px;\n     }\n     \n     .preset-image {\n         width: 120px;\n         height: 90px;\n     }\n\n     .carousel-button {\n        width: 30px;\n        height: 30px;\n        font-size: 16px;\n        margin: 0 5px;\n     }\n\n     .difficulty-controls {\n         gap: 5px;\n     }\n\n     .difficulty-controls button {\n         padding: 8px 15px;\n         font-size: 14px;\n     }\n\n     .info-item {\n         display: block;\n         margin: 5px 0;\n     }\n\n     #puzzle-container,\n     #pieces-container {\n         max-width: 95vw;\n         margin: 15px auto;\n     }\n\n     .puzzle-piece {\n         border: 1px solid rgba(255, 255, 255, 0.9);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3), \n                inset 1px 1px 1px rgba(255, 255, 255, 0.4),\n                inset -1px -1px 1px rgba(20, 20, 20, 0.4);\n     }\n\n     .puzzle-piece:hover {\n         transform: none;\n     }\n }\n\n @media (max-width: 480px) {\n     .preset-image {\n         width: 100px;\n         height: 75px;\n     }\n      .puzzle-piece {\n         border: 0px solid rgba(255, 255, 255, 0.9);\n         border-radius: 2px;\n     }\n     .carousel-wrapper {\n        max-width: calc(100vw - 40px);\n     }\n     .carousel-button {\n        display: none; /* 작은 화면에서는 버튼을 숨기고 터치 스크롤을 유도 */\n     }\n     .carousel-container {\n        overflow-x: auto; /* 터치 스크롤 활성화 */\n        -webkit-overflow-scrolling: touch; /* 부드러운 스크롤 효과 */\n        scrollbar-width: none; /* Firefox 스크롤바 숨김 */\n     }\n     .carousel-container::-webkit-scrollbar {\n        display: none; /* Chrome, Safari 스크롤바 숨김 */\n     }\n\n     .difficulty-controls button {\n         padding: 6px 12px;\n         font-size: 12px;\n     }\n }`,""]);const d=u},368:(e,t,n)=>{"use strict";e.exports=n.p+"cff1669beab67ee231db.jpeg"},404:(e,t,n)=>{"use strict";e.exports=n.p+"ae6e017648296a194442.jpeg"},408:(e,t,n)=>{var r={"./atumn2.jpeg":480,"./autumn.jpeg":257,"./autumn2.jpeg":289,"./books.png":422,"./cake.jpeg":911,"./cindy.jpeg":428,"./cindy2.jpeg":774,"./hotcake.jpeg":566,"./icecream.jpeg":60,"./knights.jpeg":303,"./macaron.jpeg":452,"./moonlight_dream.jpeg":930,"./moonlight_dream2.jpeg":348,"./night_papterart.jpeg":721,"./piano-o.png":771,"./pink.jpeg":11,"./pome.jpeg":76,"./pome2.png":817,"./puzzle-image.png":830,"./running.png":309,"./sea_watercolor.png":432,"./simchung.png":690,"./sleeping.jpeg":906,"./snow_white.jpeg":70,"./snow_white2.jpeg":368,"./snow_white3.png":878,"./snow_white4.jpeg":497,"./spring_green.jpeg":734,"./spring_joy.jpeg":563,"./summer.jpeg":794,"./summer2.jpeg":404,"./summer3.jpeg":683,"./summer4.jpeg":602,"./violet.jpeg":484,"./winter.jpeg":353,"./winter2.jpeg":424};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=408},417:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},422:(e,t,n)=>{"use strict";e.exports=n.p+"b36bd51d119530997a4f.png"},424:(e,t,n)=>{"use strict";e.exports=n.p+"0791e78513eea40c8bf3.jpeg"},428:(e,t,n)=>{"use strict";e.exports=n.p+"db27ae695ee7b29dc9b6.jpeg"},432:(e,t,n)=>{"use strict";e.exports=n.p+"a69f69b00d6ad27fa71a.png"},443:(e,t,n)=>{"use strict";e.exports=n.p+"a57ef2ad411f382de13c.woff2"},452:(e,t,n)=>{"use strict";e.exports=n.p+"06d802f30342bafd7374.jpeg"},480:(e,t,n)=>{"use strict";e.exports=n.p+"b203d33791e89ebbd1f5.jpeg"},484:(e,t,n)=>{"use strict";e.exports=n.p+"ac7dbf135cf65627c548.jpeg"},497:(e,t,n)=>{"use strict";e.exports=n.p+"0e1678ae1243c027cafa.jpeg"},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},563:(e,t,n)=>{"use strict";e.exports=n.p+"74ea59057b27b2069fcd.jpeg"},566:(e,t,n)=>{"use strict";e.exports=n.p+"0c6c2cc2c9e385e17b25.jpeg"},601:e=>{"use strict";e.exports=function(e){return e[1]}},602:(e,t,n)=>{"use strict";e.exports=n.p+"b57ba9eba4a272072aa2.jpeg"},659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},683:(e,t,n)=>{"use strict";e.exports=n.p+"e0b69d0661ef24382a1a.jpeg"},690:(e,t,n)=>{"use strict";e.exports=n.p+"fd29e07b5fd03a636e2a.png"},721:(e,t,n)=>{"use strict";e.exports=n.p+"8e29b6eaa758927bd1c5.jpeg"},734:(e,t,n)=>{"use strict";e.exports=n.p+"1b15f49c69ff3ed81ffc.jpeg"},771:(e,t,n)=>{"use strict";e.exports=n.p+"9573a448482d300f0c8b.png"},774:(e,t,n)=>{"use strict";e.exports=n.p+"2ba10a78ad75edc50376.jpeg"},794:(e,t,n)=>{"use strict";e.exports=n.p+"957e37ce488ff94383a6.jpeg"},817:(e,t,n)=>{"use strict";e.exports=n.p+"c919cc6fea597727307c.png"},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},830:(e,t,n)=>{"use strict";e.exports=n.p+"f0fb579da483c82303d0.png"},878:(e,t,n)=>{"use strict";e.exports=n.p+"dd9e556d9d876a90fada.png"},906:(e,t,n)=>{"use strict";e.exports=n.p+"1f38fd06ec2a6c065b89.jpeg"},911:(e,t,n)=>{"use strict";e.exports=n.p+"235a2c5e2051dc207a69.jpeg"},930:(e,t,n)=>{"use strict";e.exports=n.p+"e7caa1fd1ac7e4b30fa6.jpeg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{"use strict";var e=n(72),t=n.n(e),r=n(825),o=n.n(r),a=n(659),s=n.n(a),c=n(56),p=n.n(c),u=n(540),l=n.n(u),d=n(113),g=n.n(d),f=n(365),m={};m.styleTagTransform=g(),m.setAttributes=p(),m.insert=s().bind(null,"head"),m.domAPI=o(),m.insertStyleElement=l(),t()(f.A,m),f.A&&f.A.locals&&f.A.locals;var h=function(e,t){return e<t?-1:e>t?1:0},b=function(e){return e.reduce(function(e,t){return e+t},0)},x=function(){function e(e){this.colors=e}var t=e.prototype;return t.palette=function(){return this.colors},t.map=function(e){return e},e}(),v=function(){function e(e,t,n){return(e<<10)+(t<<5)+n}function t(e){var t=[],n=!1;function r(){t.sort(e),n=!0}return{push:function(e){t.push(e),n=!1},peek:function(e){return n||r(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return n||r(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return n||r(),t}}}function n(e,t,n,r,o,a,i){var s=this;s.r1=e,s.r2=t,s.g1=n,s.g2=r,s.b1=o,s.b2=a,s.histo=i}function r(){this.vboxes=new t(function(e,t){return h(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())})}function o(t,n){if(n.count()){var r=n.r2-n.r1+1,o=n.g2-n.g1+1,a=Math.max.apply(null,[r,o,n.b2-n.b1+1]);if(1==n.count())return[n.copy()];var i,s,c,p,u=0,l=[],d=[];if(a==r)for(i=n.r1;i<=n.r2;i++){for(p=0,s=n.g1;s<=n.g2;s++)for(c=n.b1;c<=n.b2;c++)p+=t[e(i,s,c)]||0;l[i]=u+=p}else if(a==o)for(i=n.g1;i<=n.g2;i++){for(p=0,s=n.r1;s<=n.r2;s++)for(c=n.b1;c<=n.b2;c++)p+=t[e(s,i,c)]||0;l[i]=u+=p}else for(i=n.b1;i<=n.b2;i++){for(p=0,s=n.r1;s<=n.r2;s++)for(c=n.g1;c<=n.g2;c++)p+=t[e(s,c,i)]||0;l[i]=u+=p}return l.forEach(function(e,t){d[t]=u-e}),function(e){var t,r,o,a,s,c=e+"1",p=e+"2",g=0;for(i=n[c];i<=n[p];i++)if(l[i]>u/2){for(o=n.copy(),a=n.copy(),s=(t=i-n[c])<=(r=n[p]-i)?Math.min(n[p]-1,~~(i+r/2)):Math.max(n[c],~~(i-1-t/2));!l[s];)s++;for(g=d[s];!g&&l[s-1];)g=d[--s];return o[p]=s,a[c]=o[p]+1,[o,a]}}(a==r?"r":a==o?"g":"b")}}return n.prototype={volume:function(e){var t=this;return t._volume&&!e||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(t){var n=this,r=n.histo;if(!n._count_set||t){var o,a,i,s=0;for(o=n.r1;o<=n.r2;o++)for(a=n.g1;a<=n.g2;a++)for(i=n.b1;i<=n.b2;i++)s+=r[e(o,a,i)]||0;n._count=s,n._count_set=!0}return n._count},copy:function(){var e=this;return new n(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var n=this,r=n.histo;if(!n._avg||t){var o,a,i,s,c=0,p=0,u=0,l=0;if(n.r1===n.r2&&n.g1===n.g2&&n.b1===n.b2)n._avg=[n.r1<<3,n.g1<<3,n.b1<<3];else{for(a=n.r1;a<=n.r2;a++)for(i=n.g1;i<=n.g2;i++)for(s=n.b1;s<=n.b2;s++)c+=o=r[e(a,i,s)]||0,p+=o*(a+.5)*8,u+=o*(i+.5)*8,l+=o*(s+.5)*8;n._avg=c?[~~(p/c),~~(u/c),~~(l/c)]:[~~(8*(n.r1+n.r2+1)/2),~~(8*(n.g1+n.g2+1)/2),~~(8*(n.b1+n.b2+1)/2)]}}return n._avg},contains:function(e){var t=this,n=e[0]>>3;return gval=e[1]>>3,bval=e[2]>>3,n>=t.r1&&n<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},r.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map(function(e){return e.color})},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,r,o=this.vboxes,a=0;a<o.size();a++)((n=Math.sqrt(Math.pow(e[0]-o.peek(a).color[0],2)+Math.pow(e[1]-o.peek(a).color[1],2)+Math.pow(e[2]-o.peek(a).color[2],2)))<t||void 0===t)&&(t=n,r=o.peek(a).color);return r},forcebw:function(){var e=this.vboxes;e.sort(function(e,t){return h(b(e.color),b(t.color))});var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var n=e.length-1,r=e[n].color;r[0]>251&&r[1]>251&&r[2]>251&&(e[n].color=[255,255,255])}},{quantize:function(a,i){if(!Number.isInteger(i)||i<1||i>256)throw new Error("Invalid maximum color count. It must be an integer between 1 and 256.");if(!a.length||i<2||i>256)return!1;if(!a.length||i<2||i>256)return!1;for(var s=[],c=new Set,p=0;p<a.length;p++){var u=a[p],l=u.join(",");c.has(l)||(c.add(l),s.push(u))}if(s.length<=i)return new x(s);var d=function(t){var n,r=new Array(32768);return t.forEach(function(t){n=e(t[0]>>3,t[1]>>3,t[2]>>3),r[n]=(r[n]||0)+1}),r}(a);d.forEach(function(){});var g=function(e,t){var r,o,a,i=1e6,s=0,c=1e6,p=0,u=1e6,l=0;return e.forEach(function(e){(r=e[0]>>3)<i?i=r:r>s&&(s=r),(o=e[1]>>3)<c?c=o:o>p&&(p=o),(a=e[2]>>3)<u?u=a:a>l&&(l=a)}),new n(i,s,c,p,u,l,t)}(a,d),f=new t(function(e,t){return h(e.count(),t.count())});function m(e,t){for(var n,r=e.size(),a=0;a<1e3;){if(r>=t)return;if(a++>1e3)return;if((n=e.pop()).count()){var i=o(d,n),s=i[0],c=i[1];if(!s)return;e.push(s),c&&(e.push(c),r++)}else e.push(n),a++}}f.push(g),m(f,.75*i);for(var b=new t(function(e,t){return h(e.count()*e.volume(),t.count()*t.volume())});f.size();)b.push(f.pop());m(b,i);for(var v=new r;b.size();)v.push(b.pop());return v}}}().quantize,y=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=e.naturalWidth,this.height=this.canvas.height=e.naturalHeight,this.context.drawImage(e,0,0,this.width,this.height)};y.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var w=function(){};function E(e,t){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...r)},t)}}w.prototype.getColor=function(e,t){return void 0===t&&(t=10),this.getPalette(e,5,t)[0]},w.prototype.getPalette=function(e,t,n){var r=function(e){var t=e.colorCount,n=e.quality;if(void 0!==t&&Number.isInteger(t)){if(1===t)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");t=Math.max(t,2),t=Math.min(t,20)}else t=10;return(void 0===n||!Number.isInteger(n)||n<1)&&(n=10),{colorCount:t,quality:n}}({colorCount:t,quality:n}),o=new y(e),a=function(e,t,n){for(var r,o,a,i,s,c=e,p=[],u=0;u<t;u+=n)o=c[0+(r=4*u)],a=c[r+1],i=c[r+2],(void 0===(s=c[r+3])||s>=125)&&(o>250&&a>250&&i>250||p.push([o,a,i]));return p}(o.getImageData().data,o.width*o.height,r.quality),i=v(a,r.colorCount);return i?i.palette():null},w.prototype.getColorFromUrl=function(e,t,n){var r=this,o=document.createElement("img");o.addEventListener("load",function(){var a=r.getPalette(o,5,n);t(a[0],e)}),o.src=e},w.prototype.getImageData=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){if(200==this.status){var e=new Uint8Array(this.response);i=e.length;for(var n=new Array(i),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);var o=n.join(""),a=window.btoa(o);t("data:image/png;base64,"+a)}},n.send()},w.prototype.getColorAsync=function(e,t,n){var r=this;this.getImageData(e,function(e){var o=document.createElement("img");o.addEventListener("load",function(){var e=r.getPalette(o,5,n);t(e[0],this)}),o.src=e})};const j=document.getElementById("errorMessage"),z=document.getElementById("loadingMessage"),I=document.getElementById("gameInfo"),k=(document.getElementById("completionMessage"),{errorMessage:document.getElementById("errorMessage"),loadingMessage:document.getElementById("loadingMessage"),gameInfo:document.getElementById("gameInfo"),completionMessage:document.getElementById("completionMessage"),finalTime:document.getElementById("finalTime"),gameTime:document.getElementById("gameTime"),difficultyButtons:document.querySelectorAll(".difficulty-controls button")});function M(e,t="error"){const n="success"===t?3e3:5e3;j.textContent=e,j.className=`error-message ${t}`,j.style.display="block",setTimeout(()=>{j.style.display="none",j.className="error-message"},n)}function C(){z.style.display="block"}function L(){z.style.display="none"}function S(){k.completionMessage.classList.remove("show")}const T=n.p+"b971da9123a43ae8f292.mp3",$=document.getElementById("puzzle-container"),_=document.getElementById("pieces-container"),B=new Audio(T),A=new Image;let q,P,D,U,N,F,H,R,O,W=null,X=1,Y=[];function V(){H++,J(),H===Y.length&&(Q(),setTimeout(()=>{k.finalTime.textContent=k.gameTime.textContent,k.completionMessage.classList.add("show")},500))}function G(){const e=Math.min(600,.95*window.innerWidth),t=Math.min(600,.85*window.innerHeight);let n,r;X>=1?(n=Math.min(e,A.naturalWidth),r=n/X,r>t&&(r=t,n=r*X)):(r=Math.min(t,A.naturalHeight),n=r*X,n>e&&(n=e,r=n/X)),q=Math.floor(n),P=Math.floor(r)}function J(){document.getElementById("completedPieces").textContent=H;const e=parseInt(document.getElementById("totalPieces").textContent),t=e>0?Math.round(H/e*100):0;document.getElementById("progressPercent").textContent=t}function Q(){F&&(clearInterval(F),F=null)}function K(){if(!N)return;const e=Date.now()-N,t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);document.getElementById("gameTime").textContent=`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function Z(e){if(!W)return void M("이미지를 먼저 선택해주세요.","error");_.innerHTML="",$.innerHTML="",Y=[],H=0,I.classList.remove("show"),Q(),I.classList.add("show"),N=Date.now(),F=setInterval(K,1e3);const t=function(e){let t,n;switch(e){case 12:t=4,n=3;break;case 30:default:t=6,n=5;break;case 50:t=10,n=5;break;case 100:t=10,n=10}return{cols:t,rows:n}}(e);R=t.cols,O=t.rows,D=q/R,U=P/O,document.getElementById("totalPieces").textContent=e,J();const n=document.createElement("canvas");n.width=q,n.height=P,n.getContext("2d").drawImage(A,0,0,q,P);for(let e=0;e<O;e++)for(let t=0;t<R;t++){const r=document.createElement("canvas");r.width=D,r.height=U,r.getContext("2d").drawImage(n,t*D,e*U,D,U,0,0,D,U);const o=r.toDataURL(),a=document.createElement("div");a.className="puzzle-piece",a.style.width=`${D}px`,a.style.height=`${U}px`,a.style.backgroundImage=`url(${o})`,a.style.backgroundSize="cover",a.dataset.correctX=""+t*D,a.dataset.correctY=""+e*U,Y.push(a)}!function(){Y.sort(()=>Math.random()-.5);const e=document.createDocumentFragment(),t=Math.max(300,.8*_.clientHeight);Y.forEach(n=>{const r=q-D,o=t-U,a=Math.random()*r,i=Math.random()*o;n.style.left=`${a}px`,n.style.top=`${i}px`,n.style.transform="",e.appendChild(n),function(e,t){const{puzzleContainer:n,piecesContainer:r,snapSound:o,onSnap:a}=t;let i,s,c=!1;const p=["mousedown","touchstart"];function u(e){return e.type.includes("touch")?e.touches[0]:e}function l(t){t.preventDefault(),c=!0;const n=u(t),r=e.getBoundingClientRect();i=n.clientX-r.left,s=n.clientY-r.top,e.style.zIndex=1e3,document.body.classList.add("is-dragging-body"),e.classList.add("is-dragging"),document.addEventListener("mousemove",d),document.addEventListener("mouseup",g),document.addEventListener("touchmove",d),document.addEventListener("touchend",g)}function d(t){if(!c)return;t.preventDefault();const n=u(t),o=r.getBoundingClientRect();let a=n.clientX-o.left-i,p=n.clientY-o.top-s;e.style.left=`${a}px`,e.style.top=`${p}px`}function g(t){if(!c)return;c=!1,document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",g),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",g),document.body.classList.remove("is-dragging-body"),e.classList.remove("is-dragging"),e.style.zIndex="";const r=n.getBoundingClientRect(),i=e.getBoundingClientRect(),s=parseFloat(e.dataset.correctX),u=parseFloat(e.dataset.correctY),f=i.left-r.left,m=i.top-r.top;Math.abs(f-s)<30&&Math.abs(m-u)<30&&(e.style.left=`${s}px`,e.style.top=`${u}px`,e.classList.add("snapped"),n.appendChild(e),o.currentTime=0,o.play(),p.forEach(t=>e.removeEventListener(t,l)),a&&a())}p.forEach(t=>{e.addEventListener(t,l)})}(n,{puzzleContainer:$,piecesContainer:_,snapSound:B,pieceWidth:D,onSnap:V})}),_.appendChild(e)}()}function ee(e,t){W=e,A.crossOrigin="anonymous",A.src=e}function te(){if(!W)return;const e=q;G(),$.style.width=`${q}px`,$.style.height=`${P}px`,_.style.width=`${q}px`,0!==Y.length&&(D=q/R,U=P/O,Y.forEach(t=>{if(t.style.width=`${D}px`,t.style.height=`${U}px`,t.classList.contains("snapped")){const n=q/e,r=parseFloat(t.dataset.correctX)*n,o=parseFloat(t.dataset.correctY)*n;t.dataset.correctX=r,t.dataset.correctY=o,t.style.left=`${r}px`,t.style.top=`${o}px`,t.style.transform=""}}))}A.onload=()=>{X=A.naturalWidth/A.naturalHeight,G(),$.style.width=`${q}px`,$.style.height=`${P}px`,_.style.width=`${q}px`,_.style.minHeight=`${Math.max(400,.7*P)}px`,function(e){const t=(new w).getPalette(e,2);if(t&&t.length>=2){const e=`rgb(${t[0].join(",")})`,n=`rgb(${t[1].join(",")})`;document.documentElement.style.setProperty("--theme-bg-color",`linear-gradient(135deg, ${e} 0%, ${n} 100%)`),document.documentElement.style.setProperty("--theme-button-color",e),document.documentElement.style.setProperty("--theme-button-hover-color",n)}}(A),document.querySelectorAll(".difficulty-controls button").forEach(e=>{e.disabled=!1}),M("이미지가 로드되었습니다! 난이도를 선택해주세요.","success"),L()},A.onerror=()=>{L(),M("이미지를 불러올 수 없습니다. 다른 이미지를 선택해주세요.","error"),document.querySelectorAll(".difficulty-controls button").forEach(e=>{e.disabled=!0})},function(){const e=n(408),t={},r={"puzzle-image":"꿈꾸는 산",cake:"딸기 케이크",autumn:"가을의 여유",sea_watercolor:"바다와 해변",hotcake:"핫케이크",moonlight_dream:"꿈꾸는 밤",pome:"강아지유화",cindy:"신데렐라",icecream:"아이스크림",macaron:"마카롱",snow_white:"백설공주",books:"서재"};e.keys().forEach(n=>{const o=n.replace("./","").split(".")[0],a=e(n);t[o]={url:a,title:r[o]||"제목 없음"}}),t.flowers1={url:"https://images.unsplash.com/photo-1490750967868-88aa4486c946?w=800&h=600&fit=crop&crop=center",title:"화려한 꽃"},document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".preset-images");for(const n in t){const r=t[n],o=document.createElement("div");o.classList.add("preset-image-container"),o.dataset.image=n;const a=document.createElement("img");a.classList.add("preset-image"),a.src=r.url,a.alt=r.title,o.appendChild(a),e.appendChild(o)}!function(){const e=document.querySelector(".preset-images"),t=document.querySelector(".carousel-container"),n=document.getElementById("nextBtn"),r=document.getElementById("prevBtn");let o=0;function a(){const n=t.clientWidth,r=n,a=e.scrollWidth-n;let i=o*-r;i<-a&&(i=-a),i>0&&(i=0),e.style.transform=`translateX(${i}px)`}n.addEventListener("click",()=>{const n=t.clientWidth,r=e.scrollWidth;(o+1)*n<r&&(o++,a())}),r.addEventListener("click",()=>{o>0&&(o--,a())}),window.addEventListener("resize",E(a,250))}();const n=document.querySelector(".preset-image-container");if(n){const e=n.dataset.image,r=t[e];C(),ee(r.url,r.title)}}),document.querySelector(".preset-images").addEventListener("click",e=>{const n=e.target.closest(".preset-image-container");if(!n)return;const r=n.dataset.image,o=t[r];o?(document.querySelectorAll(".preset-image").forEach(e=>e.classList.remove("selected")),n.querySelector(".preset-image").classList.add("selected"),C(),ee(o.url,o.title)):M("이미지 정보를 찾을 수 없습니다.","error")}),document.querySelectorAll(".difficulty-controls button").forEach(e=>{e.addEventListener("click",()=>{Z(parseInt(e.dataset.difficulty))})}),document.getElementById("closeCompletionMessage").addEventListener("click",S),window.addEventListener("resize",E(te,250))}()})()})();