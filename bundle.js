(()=>{var e={11:(e,t,n)=>{"use strict";e.exports=n.p+"44b0dcd2a0f86ab0c12b.jpeg"},56:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},60:(e,t,n)=>{"use strict";e.exports=n.p+"ba19a80c010c0c6d979f.jpeg"},70:(e,t,n)=>{"use strict";e.exports=n.p+"0b2f05f447cf0df7ff17.jpeg"},72:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},i=[],s=0;s<e.length;s++){var c=e[s],p=r.base?c[0]+r.base:c[0],u=a[p]||0,l="".concat(p," ").concat(u);a[p]=u+1;var d=n(l),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)t[d].references++,t[d].updater(f);else{var g=o(f,r);r.byIndex=s,t.splice(s,0,{identifier:l,updater:g,references:1})}i.push(l)}return i}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=n(a[i]);t[s].references--}for(var c=r(e,o),p=0;p<a.length;p++){var u=n(a[p]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=c}}},76:(e,t,n)=>{"use strict";e.exports=n.p+"b5328a20595be26969ca.jpeg"},113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},257:(e,t,n)=>{"use strict";e.exports=n.p+"29fa3de44fde51db06b3.jpeg"},289:(e,t,n)=>{"use strict";e.exports=n.p+"8749d7e43be0086340f3.jpeg"},303:(e,t,n)=>{"use strict";e.exports=n.p+"73a0d5117ad05da2d63f.jpeg"},309:(e,t,n)=>{"use strict";e.exports=n.p+"6768ac511ce9232dc8be.png"},314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var p=0;p<e.length;p++){var u=[].concat(e[p]);r&&i[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},348:(e,t,n)=>{"use strict";e.exports=n.p+"f9f3440436380dcc6532.jpeg"},353:(e,t,n)=>{"use strict";e.exports=n.p+"5558569c356c6c40ef4d.jpeg"},365:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(601),o=n.n(r),a=n(314),i=n.n(a),s=n(417),c=n.n(s),p=new URL(n(443),n.b),u=i()(o()),l=c()(p);u.push([e.id,`:root {\n     --theme-bg-color: linear-gradient(135deg, #adbdda 0%, #9e92ac 100%);\n     --theme-button-color: #9899ca;\n     --theme-button-hover-color: #7081b8;\n }\n\n @font-face {\n     font-family: 'SUITE Variable';\n     font-weight: 300 900;\n     /* 폰트 파일 경로가 올바른지 확인해주세요. */\n     src: url(${l}) format('woff2-variations');\n }\n\n\n * {\n     box-sizing: border-box;\n }\n\n body {\n     font-family: 'SUITE Variable', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n     text-align: center;\n     background: var(--theme-bg-color);\n     transition: 0.5s ease;\n     margin: 0;\n     padding: 20px;\n     min-height: 100vh;\n     color: #333;\n }\n\n .container {\n     max-width: 1200px;\n     margin: 0 auto;\n }\n\n h1 {\n     color: white;\n     text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n     margin-bottom: 30px;\n }\n\n .controls {\n     background: white;\n     border-radius: 15px;\n     padding: 20px;\n     margin-bottom: 20px;\n     box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n }\n\n .image-selection {\n     margin-bottom: 20px;\n }\n\n /* --- 캐러셀 스타일 시작 --- */\n .carousel-wrapper {\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;    \n    max-width: 800px;\n    margin: 0 auto 20px;\n }\n \n .carousel-container {\n    overflow: hidden;\n    width: 100%;\n }\n\n .preset-images {\n    display: flex; /* grid 대신 flex 사용 */\n    gap: 15px;\n    padding: 10px;\n    transition: transform 0.5s ease-in-out; /* 슬라이드 애니메이션 */\n }\n\n .preset-image-container {\n     text-align: center;\n     cursor: pointer;\n     transition: transform 0.3s;\n     flex-shrink: 0; /* 아이템 크기가 줄어들지 않도록 설정 */\n }\n /* --- 캐러셀 스타일 끝 --- */\n\n\n .preset-image-container:hover {\n     transform: translateY(-5px);\n }\n\n .preset-image {\n     width: 150px; /* 이미지 너비 조정 */\n     height: 110px; /* 이미지 높이 조정 */\n     border: 3px solid #ddd;\n     border-radius: 10px;\n     cursor: pointer;\n     object-fit: cover;\n     transition: all 0.3s;\n     display: block;\n }\n\n .preset-image:hover {\n     border-color: var(--theme-button-color);\n     box-shadow: 0 5px 15px var(--theme-button-color);;\n }\n\n .preset-image.selected {\n     border-color: var(--theme-button-color);\n     border-width: 4px;\n     box-shadow: 0 8px 20px var(--theme-button-color);;\n }\n \n /* 캐러셀 버튼 스타일 */\n .carousel-button {\n    background-color: rgba(255, 255, 255, 0.7);\n    border: 1px solid #ccc;\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;    \n    font-size: 20px;\n    font-family: 'SUITE Variable';\n    font-weight: bold;\n    cursor: pointer;\n    transition: all 0.2s;\n    margin: 0 10px;\n    z-index: 10;\n }\n \n .carousel-button:hover {\n    background-color: white;\n    box-shadow: 0 2px 5px rgba(0,0,0,0.2);\n }\n\n .difficulty-controls {\n     display: flex;\n     justify-content: center;\n     gap: 10px;\n     flex-wrap: wrap;\n }\n\n .difficulty-controls button {\n     background: var(--theme-button-color);\n     color: white;\n     border: none;\n     padding: 10px 20px;\n     border-radius: 8px;\n     cursor: pointer;\n     font-family: 'SUITE Variable';\n     font-size: 16px;\n     text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); \n     transition: all 0.3s;\n     box-shadow: inset 1px 1px 2px rgba(255, 255, 255, 0.2), inset -1px -1px 2px rgba(20, 20, 20, 0.2);\n }\n\n .difficulty-controls button:hover {\n     background: var(--theme-button-hover-color);\n     transform: translateY(-2px);\n }\n\n .difficulty-controls button:disabled {\n     background: #ccc;\n     cursor: not-allowed;\n     transform: none;\n }\n\n .game-info {\n     background: white;\n     border-radius: 10px;\n     padding: 15px;\n     margin-bottom: 20px;\n     box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n     display: none;\n }\n\n .game-info.show {\n     display: block;\n }\n\n .info-item {\n     display: inline-block;\n     margin: 0 15px;\n     font-weight: bold;\n }\n\n .error-message {\n     \n     color: rgb(43, 43, 43);\n     padding: 10px;\n     border-radius: 6px;\n     margin: 10px 0;\n     display: none;\n }\n\n .message-space { height: 50px;}\n\n .loading {    \n     color: rgb(77, 77, 77);\n     padding: 10px;\n     border-radius: 5px;\n     margin: 10px 0;\n     display: none;\n }\n\n #puzzle-container {\n     border: 0px solid #333;\n     position: relative;\n     background-color: #fff;\n     margin: 20px auto;\n     border-radius: 10px;\n     box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);\n     overflow: hidden;\n     z-index: 1;\n }\n\n #pieces-container {\n     border: 0px solid #999;\n     position: relative;\n     margin: 20px auto;\n     min-height: 200px;\n     background: rgba(255, 255, 255, 0.6);\n     border-radius: 10px;\n     backdrop-filter: blur(5px);\n     z-index: 2;\n }\n\n .puzzle-piece {\n     position: absolute;\n     border: 0px solid rgba(255, 255, 255, 0.8);\n     cursor: grab;\n     border-radius: 5px;\n     transition: transform 0.3s ease;\n     box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3), \n                inset 1px 1px 2px rgba(255, 255, 255, 0.6),\n                inset -1px -1px 2px rgba(20, 20, 20, 0.6);\n     z-index: 3;\n }\n\n .puzzle-piece:hover {\n     transform: scale(1.05);\n     z-index: 10;\n }\n\n .puzzle-piece:active {\n     cursor: grabbing;\n     z-index: 9;\n }\n\n .puzzle-piece.snapped {\n     cursor: default;\n     border: 0px solid rgba(0, 0, 0, 0.1);\n     border-radius: 0;\n     box-shadow: none;\n     z-index: 4;\n }\n\n .completion-message {\n     position: fixed;\n     top: 50%;\n     left: 50%;\n     transform: translate(-50%, -50%);\n     background: white;\n     padding: 30px;\n     border-radius: 15px;\n     box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n     z-index: 10000;\n     text-align: center;\n     display: none;\n }\n\n .completion-message.show {\n     display: block;\n     animation: popIn 0.5s ease;\n }\n\n @keyframes popIn {\n     0% {\n         transform: translate(-50%, -50%) scale(0.5);\n         opacity: 0;\n     }\n\n     100% {\n         transform: translate(-50%, -50%) scale(1);\n         opacity: 1;\n     }\n }\n\n /* 반응형 디자인 */\n @media (max-width: 768px) {\n     body {\n         padding: 10px;\n     }\n\n     h1 {\n         font-size: 24px;\n         margin-bottom: 20px;\n     }\n\n     .controls {\n         padding: 15px;\n     }\n     \n     .preset-image {\n         width: 120px;\n         height: 90px;\n     }\n\n     .carousel-button {\n        width: 30px;\n        height: 30px;\n        font-size: 16px;\n        margin: 0 5px;\n     }\n\n     .difficulty-controls {\n         gap: 5px;\n     }\n\n     .difficulty-controls button {\n         padding: 8px 15px;\n         font-size: 14px;\n     }\n\n     .info-item {\n         display: block;\n         margin: 5px 0;\n     }\n\n     #puzzle-container,\n     #pieces-container {\n         max-width: 95vw;\n         margin: 15px auto;\n     }\n\n     .puzzle-piece {\n         border: 1px solid rgba(255, 255, 255, 0.9);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3), \n                inset 1px 1px 1px rgba(255, 255, 255, 0.4),\n                inset -1px -1px 1px rgba(20, 20, 20, 0.4);\n     }\n\n     .puzzle-piece:hover {\n         transform: none;\n     }\n }\n\n @media (max-width: 480px) {\n     .preset-image {\n         width: 100px;\n         height: 75px;\n     }\n      .puzzle-piece {\n         border: 0px solid rgba(255, 255, 255, 0.9);\n         border-radius: 2px;\n     }\n     .carousel-wrapper {\n        max-width: calc(100vw - 40px);\n     }\n     .carousel-button {\n        display: none; /* 작은 화면에서는 버튼을 숨기고 터치 스크롤을 유도 */\n     }\n     .carousel-container {\n        overflow-x: auto; /* 터치 스크롤 활성화 */\n        -webkit-overflow-scrolling: touch; /* 부드러운 스크롤 효과 */\n        scrollbar-width: none; /* Firefox 스크롤바 숨김 */\n     }\n     .carousel-container::-webkit-scrollbar {\n        display: none; /* Chrome, Safari 스크롤바 숨김 */\n     }\n\n     .difficulty-controls button {\n         padding: 6px 12px;\n         font-size: 12px;\n     }\n }`,""]);const d=u},368:(e,t,n)=>{"use strict";e.exports=n.p+"cff1669beab67ee231db.jpeg"},404:(e,t,n)=>{"use strict";e.exports=n.p+"ae6e017648296a194442.jpeg"},408:(e,t,n)=>{var r={"./atumn2.jpeg":480,"./autumn.jpeg":257,"./autumn2.jpeg":289,"./books.png":422,"./cake.jpeg":911,"./cindy.jpeg":428,"./cindy2.jpeg":774,"./hotcake.jpeg":566,"./icecream.jpeg":60,"./knights.jpeg":303,"./macaron.jpeg":452,"./moonlight_dream.jpeg":930,"./moonlight_dream2.jpeg":348,"./night_papterart.jpeg":721,"./pink.jpeg":11,"./pome.jpeg":76,"./pome2.png":817,"./puzzle-image.png":830,"./running.png":309,"./sea_watercolor.png":432,"./simchung.png":690,"./sleeping.jpeg":906,"./snow_white.jpeg":70,"./snow_white2.jpeg":368,"./snow_white3.png":878,"./snow_white4.jpeg":497,"./spring_green.jpeg":734,"./spring_joy.jpeg":563,"./summer.jpeg":794,"./summer2.jpeg":404,"./summer3.jpeg":683,"./summer4.jpeg":602,"./violet.jpeg":484,"./winter.jpeg":353,"./winter2.jpeg":424};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=408},417:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},422:(e,t,n)=>{"use strict";e.exports=n.p+"b36bd51d119530997a4f.png"},424:(e,t,n)=>{"use strict";e.exports=n.p+"0791e78513eea40c8bf3.jpeg"},428:(e,t,n)=>{"use strict";e.exports=n.p+"db27ae695ee7b29dc9b6.jpeg"},432:(e,t,n)=>{"use strict";e.exports=n.p+"a69f69b00d6ad27fa71a.png"},443:(e,t,n)=>{"use strict";e.exports=n.p+"a57ef2ad411f382de13c.woff2"},452:(e,t,n)=>{"use strict";e.exports=n.p+"06d802f30342bafd7374.jpeg"},480:(e,t,n)=>{"use strict";e.exports=n.p+"b203d33791e89ebbd1f5.jpeg"},484:(e,t,n)=>{"use strict";e.exports=n.p+"ac7dbf135cf65627c548.jpeg"},497:(e,t,n)=>{"use strict";e.exports=n.p+"0e1678ae1243c027cafa.jpeg"},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},563:(e,t,n)=>{"use strict";e.exports=n.p+"74ea59057b27b2069fcd.jpeg"},566:(e,t,n)=>{"use strict";e.exports=n.p+"0c6c2cc2c9e385e17b25.jpeg"},601:e=>{"use strict";e.exports=function(e){return e[1]}},602:(e,t,n)=>{"use strict";e.exports=n.p+"b57ba9eba4a272072aa2.jpeg"},659:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},683:(e,t,n)=>{"use strict";e.exports=n.p+"e0b69d0661ef24382a1a.jpeg"},690:(e,t,n)=>{"use strict";e.exports=n.p+"fd29e07b5fd03a636e2a.png"},721:(e,t,n)=>{"use strict";e.exports=n.p+"8e29b6eaa758927bd1c5.jpeg"},734:(e,t,n)=>{"use strict";e.exports=n.p+"1b15f49c69ff3ed81ffc.jpeg"},774:(e,t,n)=>{"use strict";e.exports=n.p+"2ba10a78ad75edc50376.jpeg"},794:(e,t,n)=>{"use strict";e.exports=n.p+"957e37ce488ff94383a6.jpeg"},817:(e,t,n)=>{"use strict";e.exports=n.p+"c919cc6fea597727307c.png"},825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},830:(e,t,n)=>{"use strict";e.exports=n.p+"f0fb579da483c82303d0.png"},878:(e,t,n)=>{"use strict";e.exports=n.p+"dd9e556d9d876a90fada.png"},906:(e,t,n)=>{"use strict";e.exports=n.p+"1f38fd06ec2a6c065b89.jpeg"},911:(e,t,n)=>{"use strict";e.exports=n.p+"235a2c5e2051dc207a69.jpeg"},930:(e,t,n)=>{"use strict";e.exports=n.p+"e7caa1fd1ac7e4b30fa6.jpeg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{"use strict";var e=function(e,t){return e<t?-1:e>t?1:0},t=function(e){return e.reduce(function(e,t){return e+t},0)},r=function(){function e(e){this.colors=e}var t=e.prototype;return t.palette=function(){return this.colors},t.map=function(e){return e},e}(),o=function(){function n(e,t,n){return(e<<10)+(t<<5)+n}function o(e){var t=[],n=!1;function r(){t.sort(e),n=!0}return{push:function(e){t.push(e),n=!1},peek:function(e){return n||r(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return n||r(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return n||r(),t}}}function a(e,t,n,r,o,a,i){var s=this;s.r1=e,s.r2=t,s.g1=n,s.g2=r,s.b1=o,s.b2=a,s.histo=i}function i(){this.vboxes=new o(function(t,n){return e(t.vbox.count()*t.vbox.volume(),n.vbox.count()*n.vbox.volume())})}function s(e,t){if(t.count()){var r=t.r2-t.r1+1,o=t.g2-t.g1+1,a=Math.max.apply(null,[r,o,t.b2-t.b1+1]);if(1==t.count())return[t.copy()];var i,s,c,p,u=0,l=[],d=[];if(a==r)for(i=t.r1;i<=t.r2;i++){for(p=0,s=t.g1;s<=t.g2;s++)for(c=t.b1;c<=t.b2;c++)p+=e[n(i,s,c)]||0;l[i]=u+=p}else if(a==o)for(i=t.g1;i<=t.g2;i++){for(p=0,s=t.r1;s<=t.r2;s++)for(c=t.b1;c<=t.b2;c++)p+=e[n(s,i,c)]||0;l[i]=u+=p}else for(i=t.b1;i<=t.b2;i++){for(p=0,s=t.r1;s<=t.r2;s++)for(c=t.g1;c<=t.g2;c++)p+=e[n(s,c,i)]||0;l[i]=u+=p}return l.forEach(function(e,t){d[t]=u-e}),function(e){var n,r,o,a,s,c=e+"1",p=e+"2",f=0;for(i=t[c];i<=t[p];i++)if(l[i]>u/2){for(o=t.copy(),a=t.copy(),s=(n=i-t[c])<=(r=t[p]-i)?Math.min(t[p]-1,~~(i+r/2)):Math.max(t[c],~~(i-1-n/2));!l[s];)s++;for(f=d[s];!f&&l[s-1];)f=d[--s];return o[p]=s,a[c]=o[p]+1,[o,a]}}(a==r?"r":a==o?"g":"b")}}return a.prototype={volume:function(e){var t=this;return t._volume&&!e||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(e){var t=this,r=t.histo;if(!t._count_set||e){var o,a,i,s=0;for(o=t.r1;o<=t.r2;o++)for(a=t.g1;a<=t.g2;a++)for(i=t.b1;i<=t.b2;i++)s+=r[n(o,a,i)]||0;t._count=s,t._count_set=!0}return t._count},copy:function(){var e=this;return new a(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(e){var t=this,r=t.histo;if(!t._avg||e){var o,a,i,s,c=0,p=0,u=0,l=0;if(t.r1===t.r2&&t.g1===t.g2&&t.b1===t.b2)t._avg=[t.r1<<3,t.g1<<3,t.b1<<3];else{for(a=t.r1;a<=t.r2;a++)for(i=t.g1;i<=t.g2;i++)for(s=t.b1;s<=t.b2;s++)c+=o=r[n(a,i,s)]||0,p+=o*(a+.5)*8,u+=o*(i+.5)*8,l+=o*(s+.5)*8;t._avg=c?[~~(p/c),~~(u/c),~~(l/c)]:[~~(8*(t.r1+t.r2+1)/2),~~(8*(t.g1+t.g2+1)/2),~~(8*(t.b1+t.b2+1)/2)]}}return t._avg},contains:function(e){var t=this,n=e[0]>>3;return gval=e[1]>>3,bval=e[2]>>3,n>=t.r1&&n<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},i.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map(function(e){return e.color})},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,r,o=this.vboxes,a=0;a<o.size();a++)((n=Math.sqrt(Math.pow(e[0]-o.peek(a).color[0],2)+Math.pow(e[1]-o.peek(a).color[1],2)+Math.pow(e[2]-o.peek(a).color[2],2)))<t||void 0===t)&&(t=n,r=o.peek(a).color);return r},forcebw:function(){var n=this.vboxes;n.sort(function(n,r){return e(t(n.color),t(r.color))});var r=n[0].color;r[0]<5&&r[1]<5&&r[2]<5&&(n[0].color=[0,0,0]);var o=n.length-1,a=n[o].color;a[0]>251&&a[1]>251&&a[2]>251&&(n[o].color=[255,255,255])}},{quantize:function(t,c){if(!Number.isInteger(c)||c<1||c>256)throw new Error("Invalid maximum color count. It must be an integer between 1 and 256.");if(!t.length||c<2||c>256)return!1;if(!t.length||c<2||c>256)return!1;for(var p=[],u=new Set,l=0;l<t.length;l++){var d=t[l],f=d.join(",");u.has(f)||(u.add(f),p.push(d))}if(p.length<=c)return new r(p);var g=function(e){var t,r=new Array(32768);return e.forEach(function(e){t=n(e[0]>>3,e[1]>>3,e[2]>>3),r[t]=(r[t]||0)+1}),r}(t);g.forEach(function(){});var h=function(e,t){var n,r,o,i=1e6,s=0,c=1e6,p=0,u=1e6,l=0;return e.forEach(function(e){(n=e[0]>>3)<i?i=n:n>s&&(s=n),(r=e[1]>>3)<c?c=r:r>p&&(p=r),(o=e[2]>>3)<u?u=o:o>l&&(l=o)}),new a(i,s,c,p,u,l,t)}(t,g),m=new o(function(t,n){return e(t.count(),n.count())});function x(e,t){for(var n,r=e.size(),o=0;o<1e3;){if(r>=t)return;if(o++>1e3)return;if((n=e.pop()).count()){var a=s(g,n),i=a[0],c=a[1];if(!i)return;e.push(i),c&&(e.push(c),r++)}else e.push(n),o++}}m.push(h),x(m,.75*c);for(var b=new o(function(t,n){return e(t.count()*t.volume(),n.count()*n.volume())});m.size();)b.push(m.pop());x(b,c);for(var v=new i;b.size();)v.push(b.pop());return v}}}().quantize,a=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=e.naturalWidth,this.height=this.canvas.height=e.naturalHeight,this.context.drawImage(e,0,0,this.width,this.height)};a.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var s=function(){};s.prototype.getColor=function(e,t){return void 0===t&&(t=10),this.getPalette(e,5,t)[0]},s.prototype.getPalette=function(e,t,n){var r=function(e){var t=e.colorCount,n=e.quality;if(void 0!==t&&Number.isInteger(t)){if(1===t)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");t=Math.max(t,2),t=Math.min(t,20)}else t=10;return(void 0===n||!Number.isInteger(n)||n<1)&&(n=10),{colorCount:t,quality:n}}({colorCount:t,quality:n}),i=new a(e),s=function(e,t,n){for(var r,o,a,i,s,c=e,p=[],u=0;u<t;u+=n)o=c[0+(r=4*u)],a=c[r+1],i=c[r+2],(void 0===(s=c[r+3])||s>=125)&&(o>250&&a>250&&i>250||p.push([o,a,i]));return p}(i.getImageData().data,i.width*i.height,r.quality),c=o(s,r.colorCount);return c?c.palette():null},s.prototype.getColorFromUrl=function(e,t,n){var r=this,o=document.createElement("img");o.addEventListener("load",function(){var a=r.getPalette(o,5,n);t(a[0],e)}),o.src=e},s.prototype.getImageData=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){if(200==this.status){var e=new Uint8Array(this.response);i=e.length;for(var n=new Array(i),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);var o=n.join(""),a=window.btoa(o);t("data:image/png;base64,"+a)}},n.send()},s.prototype.getColorAsync=function(e,t,n){var r=this;this.getImageData(e,function(e){var o=document.createElement("img");o.addEventListener("load",function(){var e=r.getPalette(o,5,n);t(e[0],this)}),o.src=e})};var c=n(72),p=n.n(c),u=n(825),l=n.n(u),d=n(659),f=n.n(d),g=n(56),h=n.n(g),m=n(540),x=n.n(m),b=n(113),v=n.n(b),y=n(365),w={};w.styleTagTransform=v(),w.setAttributes=h(),w.insert=f().bind(null,"head"),w.domAPI=l(),w.insertStyleElement=x(),p()(y.A,w),y.A&&y.A.locals&&y.A.locals;const E=n(408),j={},z={"puzzle-image":"꿈꾸는 산",cake:"딸기 케이크",autumn:"가을의 여유",sea_watercolor:"바다와 해변",hotcake:"핫케이크",moonlight_dream:"꿈꾸는 밤",pome:"강아지유화",cindy:"신데렐라",icecream:"아이스크림",macaron:"마카롱",snow_white:"백설공주",books:"서재"};E.keys().forEach(e=>{const t=e.replace("./","").split(".")[0],n=E(e);j[t]={url:n,title:z[t]||"제목 없음"}}),j.flowers1={url:"https://images.unsplash.com/photo-1490750967868-88aa4486c946?w=800&h=600&fit=crop&crop=center",title:"화려한 꽃"},document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".preset-images");for(const t in j)if(j.hasOwnProperty(t)){const n=j[t],r=document.createElement("div");r.classList.add("preset-image-container"),r.dataset.image=t;const o=document.createElement("img");o.classList.add("preset-image"),o.src=n.url,o.alt=n.title,r.appendChild(o),e.appendChild(r)}!function(){const e=document.querySelector(".preset-images"),t=document.querySelector(".carousel-container"),n=document.getElementById("nextBtn"),r=document.getElementById("prevBtn");let o=0;function a(){const n=t.clientWidth,r=n,a=e.scrollWidth-n;let i=o*-r;i<-a&&(i=-a),i>0&&(i=0),e.style.transform=`translateX(${i}px)`}n.addEventListener("click",()=>{const n=t.clientWidth,r=e.scrollWidth;(o+1)*n<r&&(o++,a())}),r.addEventListener("click",()=>{o>0&&(o--,a())}),window.addEventListener("resize",Q(a,250))}();const t=document.querySelector(".preset-image-container");t&&t.click()});const k=document.getElementById("puzzle-container"),I=document.getElementById("pieces-container"),M=document.getElementById("errorMessage"),C=document.getElementById("loadingMessage"),L=document.getElementById("gameInfo"),S=document.getElementById("completionMessage"),T=new Image;let _,$,B,P,q=null,A=1,U=[],D=null,H=null,N=0,O=0,F=0;function R(){const e=Math.min(600,.95*window.innerWidth),t=Math.min(600,.85*window.innerHeight);let n,r;A>=1?(n=Math.min(e,T.naturalWidth),r=n/A,r>t&&(r=t,n=r*A)):(r=Math.min(t,T.naturalHeight),n=r*A,n>e&&(n=e,r=n/A)),_=Math.floor(n),$=Math.floor(r)}function W(){I.innerHTML="",k.innerHTML="",U=[],N=0,L.classList.remove("show"),Y()}function X(){document.getElementById("completedPieces").textContent=N;const e=parseInt(document.getElementById("totalPieces").textContent),t=e>0?Math.round(N/e*100):0;document.getElementById("progressPercent").textContent=t}function Y(){H&&(clearInterval(H),H=null)}function V(){if(!D)return;const e=Date.now()-D,t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);document.getElementById("gameTime").textContent=`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function G(e){M.textContent=e,M.style.display="block",setTimeout(()=>{M.style.display="none"},5e3)}function J(){C.style.display="none"}function Q(e,t){let n;return function(...r){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...r)},t)}}T.onload=()=>{J(),A=T.naturalWidth/T.naturalHeight,R(),k.style.width=`${_}px`,k.style.height=`${$}px`,I.style.width=`${_}px`,I.style.minHeight=`${Math.max(400,.7*$)}px`,function(){const e=(new s).getPalette(T,2);if(e&&e.length>=2){const t=`rgb(${e[0].join(",")})`,n=`rgb(${e[1].join(",")})`;document.documentElement.style.setProperty("--theme-bg-color",`linear-gradient(135deg, ${t} 0%, ${n} 100%)`),document.documentElement.style.setProperty("--theme-button-color",t),document.documentElement.style.setProperty("--theme-button-hover-color",n)}}(),document.querySelectorAll(".difficulty-controls button").forEach(e=>{e.disabled=!1}),M.textContent="이미지가 로드되었습니다! 난이도를 선택해주세요.",M.style.display="block",setTimeout(()=>{M.style.display="none"},3e3)},T.onerror=()=>{J(),G("이미지를 불러올 수 없습니다. 다른 이미지를 선택해주세요."),document.querySelectorAll(".difficulty-controls button").forEach(e=>{e.disabled=!0})},window.addEventListener("resize",Q(function(){q&&(R(),k.style.width=`${_}px`,k.style.height=`${$}px`,I.style.width=`${_}px`,I.style.minHeight=`${Math.max(400,.7*$)}px`,U.length>0&&(B=_/O,P=$/F,U.forEach(e=>{if(e.style.width=`${B}px`,e.style.height=`${P}px`,e.classList.contains("snapped")){const t=e.dataset.col*B,n=e.dataset.row*P;e.style.left=`${t}px`,e.style.top=`${n}px`}})))},250)),document.querySelector(".preset-images").addEventListener("click",e=>{const t=e.target.closest(".preset-image-container");if(!t)return;const n=t.dataset.image,r=j[n];var o;r?(document.querySelectorAll(".preset-image").forEach(e=>e.classList.remove("selected")),t.querySelector(".preset-image").classList.add("selected"),C.style.display="block",o=r.url,r.title,q=o,W(),T.crossOrigin="anonymous",T.src=o):G("이미지 정보를 찾을 수 없습니다.")}),document.querySelectorAll(".difficulty-controls button").forEach(e=>{e.addEventListener("click",()=>{!function(e){if(!q)return void G("먼저 이미지를 선택해주세요.");W(),L.classList.add("show"),D=Date.now(),H=setInterval(V,1e3);const t=function(e){let t,n;switch(e){case 12:t=4,n=3;break;case 30:default:t=6,n=5;break;case 50:t=10,n=5;break;case 100:t=10,n=10}return{cols:t,rows:n}}(e),n=t.cols,r=t.rows;O=n,F=r,B=_/n,P=$/r,document.getElementById("totalPieces").textContent=e,X();const o=T.naturalWidth/n,a=T.naturalHeight/r;for(let e=0;e<r;e++)for(let t=0;t<n;t++){const n=document.createElement("canvas");n.width=B,n.height=P,n.getContext("2d").drawImage(T,t*o,e*a,o,a,0,0,B,P);const r=document.createElement("div");r.className="puzzle-piece",r.style.width=`${B}px`,r.style.height=`${P}px`,r.style.backgroundImage=`url(${n.toDataURL()})`,r.style.backgroundSize="cover",r.dataset.correctX=""+t*B,r.dataset.correctY=""+e*P,r.dataset.col=t,r.dataset.row=e,U.push(r)}U.sort(()=>Math.random()-.5),U.forEach((e,t)=>{const n=I.getBoundingClientRect(),r=Math.max(0,n.width-B),o=Math.max(0,n.height-P);e.style.left=Math.random()*r+"px",e.style.top=Math.random()*o+"px",e.style.zIndex=t,I.appendChild(e),function(e){let t,n,r=!1;const o=["mousedown","touchstart"],a=["mousemove","touchmove"],i=["mouseup","touchend"];function s(e){return e.type.includes("touch")?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}}function c(o){if(!r)return;o.preventDefault();const a=s(o);e.style.left=a.x-t+"px",e.style.top=a.y-n+"px"}function p(t){if(!r)return;r=!1,e.style.zIndex="",a.forEach(e=>document.removeEventListener(e,c)),i.forEach(e=>document.removeEventListener(e,p));const n=e.getBoundingClientRect(),s=k.getBoundingClientRect(),l=parseFloat(e.dataset.correctX)+s.left,d=parseFloat(e.dataset.correctY)+s.top,f=Math.min(30,.3*Math.min(B,P));Math.abs(n.left-l)<f&&Math.abs(n.top-d)<f&&(e.style.left=`${parseFloat(e.dataset.correctX)}px`,e.style.top=`${parseFloat(e.dataset.correctY)}px`,e.classList.add("snapped"),k.appendChild(e),o.forEach(t=>e.removeEventListener(t,u)),N++,X(),k.children.length===U.length&&(Y(),setTimeout(()=>{!function(){const e=document.getElementById("gameTime").textContent;document.getElementById("finalTime").textContent=e,S.classList.add("show")}()},500)))}function u(o){o.preventDefault();const u=s(o);r=!0,t=u.x-e.offsetLeft,n=u.y-e.offsetTop,e.style.zIndex=1e3,I.appendChild(e),a.forEach(e=>document.addEventListener(e,c)),i.forEach(e=>document.addEventListener(e,p))}o.forEach(t=>{e.addEventListener(t,u)})}(e)})}(parseInt(e.dataset.difficulty))})}),document.getElementById("closeCompletionMessage").addEventListener("click",function(){S.classList.remove("show")})})()})();